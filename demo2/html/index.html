<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Express Demo1</title>
    <!-- load css -->
    <link rel="stylesheet" href="libs/katex/katex.min.css">
    <link rel="stylesheet" href="css/style.css">
    <!-- load javascript libs -->
    <script src="libs/katex/katex.min.js"></script>
    <script src="libs/mathjs/math.min.js"></script>
</head>

<body>
    <h1>Hello Express and math.js</h1>
    <h2>1. simplify expressions </h2>
    <div id="express-box-1"></div>
    <script>
        var strs = [
            "3 + 2/4",
            "2x + 3x",
            "2 * 3 * x ",
            "x^2 + x + 3 + x^2 ",
            "x * y * - x/(x^2) "
        ];
        var htmlstring = "<table border='1'><tr><th>公式</th><th>math.js语句</th><th>结果</th></tr>";
        strs.forEach(function(value, index, array) {
            htmlstring += "<tr>";
            htmlstring += "<td>" + katex.renderToString(math.parse(value).toTex()) + "</td>";
            htmlstring += "<td>" + "math.simplify('" + value + "')" + "</td>";
            htmlstring += "<td>" + math.simplify(value).toString() + "</td>";
            htmlstring += "</tr>";
        });
        htmlstring += "</table>";
        document.getElementById("express-box-1").innerHTML = htmlstring;
    </script>

    <h2>2. work with an expression tree, evaluate results</h2>
    <div id="express-box-2"></div>
    <script>
        var value = "4*sin(x)+3*cos(x)";
        var htmlstring = "<table border='1'><tr><th>公式</th><th>math.js语句</th><th>结果</th></tr>";

        htmlstring += "<tr>";
        htmlstring += "<td>" + katex.renderToString(math.parse(value).toTex()) + "</td>";
        htmlstring += "<td>" + "math.simplify('" + value + "',{x:30 deg})" + "</td>";
        htmlstring += "<td>" + math.simplify(value, {}).toString() + "</td>";
        htmlstring += "</tr>";

        htmlstring += "</table>";
        document.getElementById("express-box-1").innerHTML = htmlstring;

        var htmlstring = "<table border='1'<tr><th>公式</th><th>math.js语句</th><th>结果</th></tr>";
        htmlstring += "<tr><td>" + katex.renderToString(strs[0]) + '</td><td>math.simplify("4*sin(x)+3*cos(x),{ x: 30 * math.pi / 180.0 }").toString()</td><td>' + math.simplify("4*sin(x)+3*cos(x)", {
            x: 30 * math.pi / 180.0
        }).toString() + "</td></tr>";
        htmlstring += "</table>";
        document.getElementById("express-box-2").innerHTML = htmlstring;
    </script>

    <h2>3. calculate a derivative</h2>
    <div id="express-box-3"></div>
    <script>
        var strs = [
            "\\dfrac{d\\left(2x^2 + 3x + 4\\right)}{dx}",
            "\\dfrac{dsin\\left(2x\\right)}{dx}",
            "\\dfrac{d\\left(2x^2 + 3x + 4\\right)}{dx}, x=3"
        ];
        var htmlstring = "<table border='1'<tr><th>公式</th><th>math.js语句</th><th>结果</th></tr>";
        htmlstring += "<tr><td>" + katex.renderToString(strs[0]) + '</td><td>math.derivative("2x^2 + 3x + 4","x").toString()</td><td>' + math.derivative("2x^2 + 3x + 4", "x").toString() + "</td></tr>";
        htmlstring += "<tr><td>" + katex.renderToString(strs[1]) + '</td><td>math.derivative("sin(2x)","x").toString()</td><td>' + math.derivative("sin(2x)", "x").toString() + "</td></tr>";
        htmlstring += "<tr><td>" + katex.renderToString(strs[2]) + '</td><td>math.derivative("2x^2 + 3x + 4","x").eval({x:3}).toString()</td><td>' + math.derivative("2x^2 + 3x + 4", "x").eval({
            x: 3
        }).toString() + "</td></tr>";
        htmlstring += "</table>";
        document.getElementById("express-box-3").innerHTML = htmlstring;
    </script>

    <h2>4. functions and constants</h2>
    <div id="express-box-4"></div>
    <script>
        var htmlstring = "<table border='1'<tr><th>公式</th><th>math.js语句</th><th>结果</th></tr>";

        htmlstring += "<tr><td>" + '对<i>e</i>四舍五入取三位小数有效数字' + '</td><td>' + 'math.round(math.e, 3)' + '</td><td>' + math.round(math.e, 3) + "</td></tr>";
        htmlstring += "<tr><td>" + katex.renderToString("\\dfrac{\\arctan{\\dfrac{3}{-3}}}{\\pi}") + '</td><td>' + 'math.atan2(3, -3) / math.pi' + '</td><td>' + math.atan2(3, -3) / math.pi + "</td></tr>";
        htmlstring += "<tr><td>" + katex.renderToString("\\log_{10}{10000}") + '</td><td>' + 'math.log(10000, 10)' + '</td><td>' + math.log(10000, 10) + "</td></tr>";
        htmlstring += "<tr><td>" + katex.renderToString("\\sqrt{-4}") + '</td><td>' + 'math.sqrt(-4)' + '</td><td>' + math.sqrt(-4) + "</td></tr>";
        htmlstring += "<tr><td>" + katex.renderToString("\\begin{bmatrix} -1,2 \\\\ 3,1\\end{bmatrix} ^2=\\begin{bmatrix} -1*-1+2*3, -1*2+2*1 \\\\ 3*-1+1*3, 3*2+1*1 \\end{bmatrix}=\\begin{bmatrix} 7, 0 \\\\ 0, 7 \\end{bmatrix}") + '</td><td>' + 'math.pow([[-1, 2], [3, 1]], 2)' + '</td><td>' + math.pow([
            [-1, 2],
            [3, 1]
        ], 2) + "</td></tr>";

        htmlstring += "</table>";
        document.getElementById("express-box-4").innerHTML = htmlstring;
    </script>

    <h2>5. expressions</h2>
    <div id="express-box-5"></div>
    <script>
        var htmlstring = "<table border='1'<tr><th>公式</th><th>math.js语句</th><th>结果</th></tr>";


        htmlstring += "<tr><td>" + katex.renderToString("1.2 * (2 + 4.5)") + '</td><td>' + "math.eval('1.2 * (2 + 4.5)')" + '</td><td>' + math.eval('1.2 * (2 + 4.5)') + "</td></tr>";
        htmlstring += "<tr><td>" + "单位换算" + '</td><td>' + "math.eval('12.7 cm to inch')" + '</td><td>' + math.eval('12.7 cm to inch') + "</td></tr>";
        htmlstring += "<tr><td>" + katex.renderToString("\\sin(45\\degree)^2") + '</td><td>' + "math.eval('sin(45 deg) ^ 2')" + '</td><td>' + math.eval('sin(45 deg) ^ 2') + "</td></tr>";

        htmlstring += "</table>";
        document.getElementById("express-box-5").innerHTML = htmlstring;
    </script>

</body>

</html>