function ShowDiv(a,b){document.getElementById(a).style.display="block",document.getElementById(b).style.display="block",document.getElementById(b).style.width=document.body.scrollWidth,document.getElementById(b).style.height=document.height,document.getElementById("searchtxt").focus()}function CloseDiv(a,b){document.getElementById(a).style.display="none",document.getElementById(b).style.display="none",document.getElementById("searchul").innerHTML="",document.getElementById("searchtxt").value=""}function escapeHtml(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return a.replace(/[&<>"']/g,function(a){return b[a]})}function searchoff(){var a=document.getElementById("searchul");a.innerHTML="";var b;sendtxt="/?search="+document.getElementById("searchtxt").value,b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),b.onreadystatechange=function(){if(4==b.readyState&&200==b.status&&(contain=b.responseText,""!=contain&&"null"!=contain))for(json=JSON.parse(contain),i=0;i<json.length;i++){var c=json[i],d="javascript:window.location.href='"+c.Path+"'";li=document.createElement("li"),0==i?li.className="searchlich":li.className="searchli",li.id=i.toString(),li.innerHTML=escapeHtml(c.Match)+"<br>"+escapeHtml(c.Path)+"</br>",a.appendChild(li),document.getElementById(i.toString()).setAttribute("onclick",d),document.getElementById(i.toString()).setAttribute("onmouseenter","mousesearch(this)"),0==i&&document.getElementById(i.toString()).setAttribute("name","searchlich")}},b.open("GET",sendtxt,!0),b.send(),document.getElementById("searchtxt").blur()}function mousesearch(a){var b=document.getElementsByName("searchlich")[0];b!=this&&(b.setAttribute("class","searchli"),b.setAttribute("name",""),a.setAttribute("class","searchlich"),a.setAttribute("name","searchlich"))}function searchshow(a){var b=document.getElementById("up");if(1==a.ctrlKey&&80==a.keyCode&&b.classList.contains("search"))return ShowDiv("MyDiv","fade"),a.preventDefault(),!1;if(27==a.keyCode&&CloseDiv("MyDiv","fade"),38==a.keyCode){var c=document.getElementById("searchul"),d=c.getElementsByTagName("li").length,e=document.getElementsByName("searchlich");if(0!=e.length){var f=Number(e[0].id);if(0==f){var g=d-1;document.getElementById(f.toString()).setAttribute("class","searchli"),document.getElementById(f.toString()).setAttribute("name",""),document.getElementById(g.toString()).setAttribute("class","searchlich"),document.getElementById(g.toString()).setAttribute("name","searchlich"),c.scrollTop=c.scrollHeight}else{var g=f-1;document.getElementById(f.toString()).setAttribute("class","searchli"),document.getElementById(f.toString()).setAttribute("name",""),document.getElementById(g.toString()).setAttribute("class","searchlich"),document.getElementById(g.toString()).setAttribute("name","searchlich");var h=document.getElementById(g.toString()).offsetHeight,i=g*h;i<c.scrollTop&&(c.scrollTop=g*h),i>c.scrollTop+c.offsetHeight&&(c.scrollTop=(g+1)*h-c.offsetHeight)}}a.preventDefault()}if(40==a.keyCode){var c=document.getElementById("searchul"),d=c.getElementsByTagName("li").length,e=document.getElementsByName("searchlich");if(0!=e.length){var f=Number(e[0].id);if(f==d-1){var g=0;document.getElementById(f.toString()).setAttribute("class","searchli"),document.getElementById(f.toString()).setAttribute("name",""),document.getElementById(g.toString()).setAttribute("class","searchlich"),document.getElementById(g.toString()).setAttribute("name","searchlich"),c.scrollTop=0}else{var g=f+1;document.getElementById(f.toString()).setAttribute("class","searchli"),document.getElementById(f.toString()).setAttribute("name",""),document.getElementById(g.toString()).setAttribute("class","searchlich"),document.getElementById(g.toString()).setAttribute("name","searchlich");var h=document.getElementById(g.toString()).offsetHeight,i=h*(g+1);i>c.scrollTop+c.offsetHeight&&(c.scrollTop=i-c.offsetHeight),h*g<c.scrollTop&&(c.scrollTop=g*h)}}a.preventDefault()}if(13==a.keyCode){var e=document.getElementsByName("searchlich");0!=e.length&&e[0].click()}}function enter(a){13==a.keyCode&&(searchoff(),a.stopPropagation())}!function(a,b){function c(b){var c;return c=a.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),c.open("GET",b,!1),c.send(),c.responseText}var d=new Persist.Store("strapdown",{swf_path:"/persist.swf"});b.head=b.getElementsByTagName("head")[0],"getElementsByClassName"in b||(b.getElementsByClassName=function(a){function c(a,b){for(var c=[],d=new RegExp("(^| )"+b+"( |$)"),e=a.getElementsByTagName("*"),f=0,g=e.length;f<g;f++)d.test(e[f].className)&&c.push(e[f]);return c}return c(b.body,a)});var e=b.getElementsByTagName("xmp")[0]||b.getElementsByTagName("textarea")[0],f=b.getElementsByTagName("title")[0],g=b.getElementsByClassName("navbar")[0],h=e.textContent||e.innerText;if(!h||!h.trim()){var i=e.getAttribute("src");i||console.warn("No embedded Markdown found in this document for Strapdown.js to work on! Visit http://strapdown.ztx.io/ to learn more."),h=c(i)}b.body.style.display="none";var j=b.createElement("meta");j.name="viewport",j.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0",b.head.firstChild?b.head.insertBefore(j,b.head.firstChild):b.head.appendChild(j);var k=d.get("theme")||e.getAttribute("theme")||"chaitin";k=k.toLowerCase();var l=getScriptBase("strapdown");upsertTheme(l,k);var m=b.createElement("link");m.href=l+"/strapdown.min.css",m.rel="stylesheet",b.head.appendChild(m);var n=function(a,b,c){var d=a.scrollTop,e=b-d,f=0,g=20,h=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b)},i=function(){f+=g,a.scrollTop=h(f,d,e,c),f<c&&setTimeout(i,g)};i()},o=b.createElement("div");o.className="backtop",o.innerHTML='<i class="backtop-icon"></i>',o.onclick=function(){n(b.body,0,800)},b.body.appendChild(o),b.onscroll=function(){b.body.scrollTop>b.body.offsetHeight/4?o.style.display="inline-block":o.style.display="none"},a.onload=function(){var a=!0,c=b.getElementById("MyDiv");b.getElementById("fade").onclick=function(){a&&CloseDiv("MyDiv","fade"),a=!0},c.onclick=function(){a=!1,ShowDiv("MyDiv","fade")}};var p=b.createElement("div");p.id="fade",p.className="black_overlay";var q=b.body;q.setAttribute("onkeydown","searchshow(event)"),q.insertBefore(p,q.lastChild);var r=b.createElement("div");r.id="MyDiv",r.className="white_content",r.innerHTML='<input class="searchtxt" id="searchtxt" type="text" onkeydown="enter(event)">',r.innerHTML+='<div class="showsearch" id="showsearch" style="text-align:center;"><ul id="searchul" class="searchul"></ul></div>',q=b.getElementById("fade"),q.insertBefore(r,q.lastChild);var s=b.createElement("div");s.className="container",s.id="content",b.body.replaceChild(s,e);var s=b.createElement("div");if(s.id="up",s.className="navbar navbar-default navbar-fixed-top",s.className+=e.getAttribute("search")?" search":"",s.className+=e.getAttribute("edit")?" edit":"",s.className+=e.getAttribute("history")?" history":"",!g&&f){s.innerHTML='<div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-nav" aria-expand="false"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="navbar-brand" id="headline">Wiki</div></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right">'+("/"!=a.location.pathname?'<li class="gohome-link"><a href="/">Go Home</a></li>':"")+'<li class="search-link"><a href="javascript:void(0);" onclick=\'ShowDiv("MyDiv","fade")\'>Search</a></li><li class="history-link"><a href="?history">History</a></li><li class="edit-link"><a href="?edit">Edit</a></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Themes <span class="caret"></span></a><ul class="dropdown-menu" id="theme"></ul></li></ul></div></div>',b.body.insertBefore(s,b.body.firstChild);var t=f.innerHTML,u=b.getElementById("headline");u&&(u.innerHTML=t);var v=b.getElementById("theme");if(v){["Chaitin","Cerulean","Cosmo","Cyborg","Darkly","Flatly","Journal","Lumen","Paper","Readable","Sandstone","Simplex","Slate","Spacelab","Superhero","United","Yeti"].forEach(function(a){if("Reset"==a){var c=b.createElement("li");c.setAttribute("class","divider"),v.appendChild(c)}var e=b.createElement("li"),f=b.createElement("a");setInnerText(f,a),f.setAttribute("href","#"),e.appendChild(f),a.toLowerCase()==k&&(e.className="active"),addEvent(f,"click",function(c){var e=a.toLowerCase();upsertTheme(l,e);var f=b.querySelectorAll("li.active");[].forEach.call(f,function(a){a.className=""}),c.target.parentNode.className="active",d.set("theme",e)}),v.appendChild(e)})}var w=b.getElementsByClassName("dropdown")[0],x=b.getElementsByClassName("navbar-toggle")[0],y=b.getElementsByClassName("navbar-collapse")[0];v&&w&&(addEvent(w,"click",function(){w.className.match(/(?:^|\s)open(?!\S)/)?w.className=w.className.replace(/(?:^|\s)open(?!\S)/g,""):w.className+=" open"}),addEvent(x,"click",function(){var a=y.className.split(" ");a.indexOf("collapse")>-1?a.splice(a.indexOf("collapse"),1):a.push("collapse"),y.className=a.join(" ")}))}var z=e.getAttribute("heading_number"),A=e.getAttribute("toc");render(s,h,k,z,A);var B=b.getElementsByTagName("footer")[0];B?B.className.indexOf("footer")<0&&(B.innerHTML+='<div>Powered By: <a href="//github.com/chaitin/strapdown-zeta">Strapdown-Zeta</a></div>',B.className="footer container"):(B=b.createElement("footer"),B.innerHTML='<div>Powered By: <a href="//github.com/chaitin/strapdown-zeta">Strapdown-Zeta</a></div>',B.className="footer container",b.body.appendChild(B)),b.body.style.display="",b.getElementsByTagName("footer")[0].style.display=""}(window,document);