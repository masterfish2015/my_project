!function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.modals=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){"use strict";var b,c={},d="querySelector"in document&&"addEventListener"in a&&"classList"in document.createElement("_"),e="closed",f={selectorToggle:"[data-modal]",selectorWindow:"[data-modal-window]",selectorClose:"[data-modal-close]",modalActiveClass:"active",modalBGClass:"modal-bg",backspaceClose:!0,callbackOpen:function(){},callbackClose:function(){}},g=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;e<f;e++)b.call(c,a[e],e,a)},h=function(){var a={},b=!1,c=0,d=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(b=arguments[0],c++);for(var e=function(c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(b&&"[object Object]"===Object.prototype.toString.call(c[d])?a[d]=h(!0,a[d],c[d]):a[d]=c[d])};c<d;c++){e(arguments[c])}return a},i=function(a,b){var c,d,e=b.charAt(0);for("["===e&&(b=b.substr(1,b.length-2),c=b.split("="),c.length>1&&(d=!0,c[1]=c[1].replace(/"/g,"").replace(/'/g,"")));a&&a!==document;a=a.parentNode){if("."===e&&a.classList.contains(b.substr(1)))return a;if("#"===e&&a.id===b.substr(1))return a;if("["===e&&a.hasAttribute(c[0])){if(!d)return a;if(a.getAttribute(c[0])===c[1])return a}if(a.tagName.toLowerCase()===b)return a}return null},j=function(a,b){if(!a.classList.contains(b)){var c=a.querySelector("iframe"),d=a.querySelector("video");if(c){var e=c.src;c.src=e}d&&d.pause()}};c.openModal=function(a,b,c){var d=h(d||f,c||{}),g=document.querySelector(b),i=document.createElement("div");i.setAttribute("data-modal-bg",null),i.classList.add(d.modalBGClass),g.classList.add(d.modalActiveClass),document.body.appendChild(i),e="open",d.callbackOpen(a,b)},c.closeModals=function(a,b){var c=h(f,b||{}),d=document.querySelectorAll(c.selectorWindow+"."+c.modalActiveClass),i=document.querySelectorAll("[data-modal-bg]");(d.length>0||i.length>0)&&(g(d,function(a){a.classList.contains(c.modalActiveClass)&&(j(a),a.classList.remove(c.modalActiveClass))}),g(i,function(a){document.body.removeChild(a)}),e="closed",c.callbackClose())};var k=function(a){var d=a.target,f=i(d,b.selectorToggle),g=i(d,b.selectorClose),h=i(d,b.selectorWindow),j=a.keyCode;if(j&&"open"===e)(27===j||b.backspaceClose&&(8===j||46===j))&&c.closeModals(null,b);else if(d){if(h&&!g)return;f?(a.preventDefault(),c.openModal(f,f.getAttribute("data-modal"),b)):"open"===e&&(a.preventDefault(),c.closeModals(d,b))}};return c.destroy=function(){b&&(document.removeEventListener("click",k,!1),document.removeEventListener("touchstart",k,!1),document.removeEventListener("keydown",k,!1),b=null)},c.init=function(a){d&&(c.destroy(),b=h(f,a||{}),document.addEventListener("click",k,!1),document.addEventListener("touchstart",k,!1),document.addEventListener("keydown",k,!1))},c});