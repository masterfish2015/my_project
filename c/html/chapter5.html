<!DOCTYPE html>
<html lang="zh">

   <head>
      <title>C Program Chapter 5</title>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!--<link href="css/impress.css" rel="stylesheet">-->
      <link type="text/css" rel="stylesheet" href="js/SyntaxHighlighter/styles/shCoreDefault.css" />

      <link href="css/animate.css/animate1.css" rel="stylesheet">
      <link href="css/substep.css" rel="stylesheet">
      <link href="css/style1.css" rel="stylesheet">
      <!-- load math show lib -->
      <script type="text/x-mathjax-config">
         MathJax.Hub.Config({ extensions: ["tex2jax.js"], jax: ["input/TeX","output/HTML-CSS"], tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} });
      </script>

      <script src="js/mathjax/MathJax.js" async></script>
   </head>

   <body>
      <div id="impress">

         <div id="5" class="step" data-x="0" data-y="0" data-scale="1">
            <h1 class="animated rubberBand " style="width:1500px">第五章 循环结构程序设计</h1>

         </div>

         <div id="5.1.1" class="step slide" data-x="-100" data-y="800" data-scale="1">
            <h3 class="animated shake  " style="padding: 0; margin: 0">5.1 while循环</h3>
            <hr>
            <h4>例5.1：求：\[\sum_{n=1}^{100}n = 1+2+...+100 \]</h4>
            <div class="substep" style="height:500px; overflow: auto">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include<stdio.h>

                    int main(void)
                    {
                        int i, sum = 0 ;
                        i=0;
                        while(i<=100){
                            sum += i; i++;
                        }
                        printf("1+2+...+100=%d\n", sum);

                        return 0;
                    }
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.1.2" class="step slide" data-x="-100" data-y="1600" data-rotate="360" data-scale="1">
            <h3 class="animated bounce " style="padding: 0; margin: 0">5.1 while循环</h3>
            <hr>
            <ol>
               <li class="substep">格式：<code>while(条件表达式）语句;</code></li>
               <li class="substep">注意，上面的<code>条件表达式</code>为<code>真（非0）</code>则执行循环(<code>语句</code>)，若为<code>假(0)</code>则退出循环</li>
               <li class="substep">注意，上面的<code>语句;</code>只能是一条语句，如果需要多条语句，则要用<code>{ }</code>来组成<span class="red">复合语句</span>，如下例：</li>
            </ol>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c;">
                  <![CDATA[
                            int sum=0, i=0;
                            while(i<10)
                                sum+=i;
                                i++; /* 这句会发生什么？ */
                            printf("sum = %d\n", sum);                            
                            ]]>
               </script>
            </div>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c;">
                  <![CDATA[
                            int sum=0, i=0;
                            while(i<10){
                                sum+=i;
                                i++; /* 这句会发生什么？ */
                            }
                            printf("sum = %d\n", sum);                            
                            ]]>
               </script>
            </div>
         </div>

         <div id="5.2.1" class="step slide" data-x="-100" data-y="2400" data-scale="1">
            <h3 class="animated flash " style="padding: 0; margin: 0">5.2 do...while循环</h3>
            <hr>
            <h4>例5.2：从键盘输入一个正数，求出其开方，若是负数则重新输入。</h4>
            <div class="substep" style="height:500px; overflow: auto">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include <stdio.h>
                    #include <math.h>
                    int main(void)
                    {
                        double x = 0, y;

                        do
                        {
                            printf("input a positive number:");
                            scanf("%lf", &x);
                        } while (x < 0);

                        y = sqrt(x);
                        printf("sqrt(%.2lf)=%.2lf\n", x, y);

                        return 0;
                    }
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.2.2" class="step slide" data-x="-100" data-y="3200" data-rotate="360" data-scale="1">
            <h3 class="animated pulse " style="padding: 0; margin: 0">5.2 do...while循环</h3>
            <hr>
            <ol>
               <li class="substep">格式：<code>do 语句; while(条件表达式);</code></li>
               <li class="substep">注意，上面的<code>条件表达式</code>为<code>真（非0）</code>则执行循环(<code>语句</code>)，若为<code>假(0)</code>则退出循环</li>
               <li class="substep">注意，上面的<code>语句;</code>只能是一条语句，如果需要多条语句，则要用<code>{ }</code>来组成<span class="red">复合语句</span>，如下例：</li>
            </ol>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c;">
                  <![CDATA[
                            double x = 0, y;

                            do
                            {
                                printf("input a positive number:");
                                scanf("%lf", &x);
                            } while (x < 0);                           
                            ]]>
               </script>
            </div>
         </div>

         <div id="5.3.1" class="step slide" data-x="1500" data-y="0" data-scale="1">
            <h3 class="animated rubberBand " style="padding: 0; margin: 0">5.3 for循环</h3>
            <hr>
            <h4>例5.3：打印输出九九乘法表</h4>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include <stdio.h>
                    
                    int main(void)
                    {
                        int row, column; //行、列
                        for(row = 1; row <=9; row++){
                            for(column = 1; column <= 9; column ++){
                                printf("%2d*%2d=%2d  ", row, column, row*column);
                            }
                            putchar('\n');
                        }
                        return 0;
                    }
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.3.2" class="step slide" data-x="1500" data-y="800" data-scale="1">
            <img src="images/fig5-1.png" style="width:100%; height:100%">
         </div>

         <div id="5.3.3" class="step slide" data-x="1500" data-y="1600" data-rotate="360" data-scale="1">
            <h3 class="animated headShake " style="padding: 0; margin: 0">5.3 for循环</h3>
            <hr>
            <ul>
               <li class="substep">格式：<code>for(表达式1;表达式2;表达式3) 语句1; </code></li>
               <li class="substep">上面的<code>表达式1</code>一般作为初始化，仅在循环开始之前执行一次, 如果有多个变量初始化，可以用<code>,</code>来隔开；</li>
               <li class="substep">上面的<code>表达式2</code>作为循环条件判断，其计算结果若为<code>真(非0)</code>，则执行循环语句<code>语句1</code>，若为<code>假(0)</code>则退出循环</li>
               <li class="substep">上面的<code>表达式3</code>在每次循环结束后都会被执行，注意是表达式而不是语句，所以最后不能加<code>;</code></li>
               <li class="substep">注意，上面的<code>语句1;</code>只能是一条语句，如果需要多条语句，则要用<code>{ }</code>来组成<span class="red">复合语句</span></li>
               <li class="substep"><code>for</code>语句可以等效于<code>while</code>语句, 如下例：</li>
            </ul>
         </div>

         <div id="5.3.4" class="step" data-x="1520" data-y="2050" data-rotate="360" data-scale="1">
            <script type="syntaxhighlighter" class="brush: c">
               <![CDATA[
                    int i, sum;
                    for(i=0, sum=0; i<10; i++)
                        sum += i;
                    //等效于下面的while语句
                    i=0; sum=0;
                    while(i<10){
                        sum += i; 
                        i++;
                    }
                    ]]>
            </script>
         </div>

         <div id="5.3.5" class="step slide" data-x="1500" data-y="2500" data-rotate="360" data-scale="1">
            <h3 class="animated swing " style="padding: 0; margin: 0">5.3 for循环</h3>
            <hr>
            <ul>
               <li class="substep"><code>for(表达式1;表达式2;表达式3) 语句1; </code>这里的三个表达式都可以省略，但是<code>;</code>不能省略, 如下例：</li>
            </ul>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    int i=0, sum=0;
                    for(;i<10;){
                        sum += i; 
                        i++;
                    }
                    //下面实现一个无限循环
                    for(;1;); // 最后的; 是一个空语句
                    //下面也是一个无限循环
                    for(;;);  //表达式2若省略，相当于循环条件永远为真（非0）
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.3.6" class="step slide" data-x="1500" data-y="3300" data-rotate="360" data-scale="1">
            <h3 class="animated tada " style="padding: 0; margin: 0">5.3 for循环</h3>
            <hr>
            <ul>
               <li class="substep"><code>for</code>语句的灵活性可以让我们把几乎所有的循环内容都写在for的头部（表达式1-3），但是很不直观，而且不利于调试，所以<span class="red">不建议</span>这样做。</li>
            </ul>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    int i, sum;
                    i=0;
                    sum=0;
                    while(i<10){
                        sum += i; i++;
                    }
                    //下面完全等效， 但不建议
                    int i, sum;
                    for(i=0, sum=0; i<10; sum+=i, i++);                    
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.4.1" class="step slide" data-x="2500" data-y="0" data-rotate="0" data-scale="1">
            <h3 class="animated wobble " style="padding: 0; margin: 0">5.4 循环的嵌套</h3>
            <hr>
            <ul>
               <li class="substep">循环的<b class="red">嵌套</b>, 指循环中可以包含另一个循环，C语言中三种循环都可以互相嵌套；</li>
               <li class="substep">注意循环的包含范围，建议用<b class="blue">缩进</b>来帮助区分（注意不是强制）</li>
               <li class="substep">例5-4：打印0-10以内的素数</li>
            </ul>
         </div>

         <div id="5.4.2" class="step slide" data-x="2500" data-y="800" data-rotate="0" data-scale="1">
            <script type="syntaxhighlighter" class="brush: c">
               <![CDATA[
                    #include<stdio.h>
                    #include<math.h>

                    #define FALSE 0
                    #define TRUE  !FALSE

                    int main(void)
                    {
                        int i, j, is_prime;
                        for(i=2; i<=10; i++){
                            is_prime = TRUE;
                            for(j=2; j<sqrt(i) && TRUE == is_prime ; j++)
                                if( i % j == 0)
                                    is_prime = FALSE;
                            if(TRUE  == is_prime)
                                printf("%d is prime number.\n", i);
                        }
                        return 0;
                    }                    
                    ]]>
            </script>
            <img class="center" src="images/fig5-2.png">
         </div>

         <div id="5.5.1" class="step slide" data-x="3500" data-y="0" data-rotate="0" data-scale="1">
            <h3 class="animated jello " style="padding: 0; margin: 0">5.5 改变循环的流向</h3>
            <hr>
            <ul>
               <li class="substep animated bounce infinite">用<code>break</code>提前终止循环</li>
               <li class="substep">例5-5：输入任意数，负数退出，正数求平方根</li>
            </ul>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include<stdio.h>
                    #include<math.h>
                    int main(void)
                    {
                        double  value;
                        do{
                            printf("input a number, negative to quit:");
                            scanf("%lf", &value);
                            if(value<0)
                                break;
                            printf("the sqrt(%.2lf)=%.2lf\n", value, sqrt(value));
                        }while(1);
                        return 0;                        
                    }
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.5.2" class="step slide" data-x="3500" data-y="800" data-rotate="0" data-scale="1">
            <h3 class="animated bounceIn " style="padding: 0; margin: 0">5.5 改变循环的流向</h3>
            <hr>
            <ul>
               <li class="substep animated bounce infinite">用<code>continue</code>提前结束本次循环</li>
               <li class="substep">例5-6：输出100--200之间不能被3整除的整数</li>

            </ul>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include<stdio.h>
                    int main(void)
                    {
                        int i;
                        for(i=100; i<=200; i++){
                            if(i % 3 == 0)
                                continue;
                            printf("%d ", i);
                        }
                        putchar('\n');
                        return 0;                        
                    }
                    ]]>
               </script>
            </div>
            <img src="images/fig5-3.png" class="substep" style="width: 100%">
         </div>

         <div id="5.6.1" class="step slide" data-x="4500" data-y="0" data-rotate="0" data-scale="1">
            <h3 class="animated bounceInDown " style="padding: 0; margin: 0">5.6 循环程序举例</h3>
            <hr>
            <ul>
               <li class="substep">例5-7：用\(\frac{\pi}{4}\approx 1-\frac{1}{3}+\frac{1}{5}-\frac{1}{7}\cdots\)求\(\pi\)的近似值</li>
            </ul>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include<stdio.h>
                    #include<math.h>
                    #define MIN_TERM 1e-6
                    
                    int main(void)
                    {
                        double pi=0.0, n=1.0, term=1.0;
                        int sign = 1;
                        
                        while(fabs(term)>=MIN_TERM){
                            pi+=term;
                            n+=2;
                            sign*=-1;
                            term=sign/n;
                        }
                        pi=pi*4;
                        printf("pi=%.8lf\n", pi); //结果：pi=3.14159065
                        return 0;                        
                    }
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.6.2" class="step slide" data-x="4500" data-y="800" data-rotate="0" data-scale="1">
            <h3 class="animated bounceInLeft " style="padding: 0; margin: 0">5.6 循环程序举例</h3>
            <hr>
            <ul>
               <li class="substep">例5-8：求Fibonacci数列的前40个数，公式：\[\left\{\begin{aligned}F_1 &amp;=1 &amp;(n=1)\\F_2 &amp;=1 &amp;(n=2)\\F_n &amp;=F_{n-1}+F_{n-2} &amp;(n\ge 3)\end{aligned}\right.\]</li>
            </ul>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include <stdio.h>

                    int main(void)
                    {
                        unsigned int f1 = 1, f2 = 1, f3;
                        printf("[%3d]%12u\n[%3d]%12u\n", 1,f1, 2,f2);
                        for (int i = 3; i <= 40; i++)
                        {
                            f3 = f1 + f2;
                            printf("[%3d]%12u\n", i, f3);
                            f1 = f2;
                            f2 = f3;
                        }
                        return 0;
                    }
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.6.3" class="step" data-x="5500" data-y="800" data-rotate="0" data-scale="1">
            <img src="images/fig5-4.png" style="height: 800px">
         </div>

         <div id="5.6.4" class="step slide" data-x="4500" data-y="1600" data-rotate="0" data-scale="1">
            <h3 class="animated bounceInRight " style="padding: 0; margin: 0">5.6 循环程序举例</h3>
            <hr>
            <ul>
               <li class="substep">例5-9：输入两个正整数m和n，求二者的最大公约数和最小公倍数</li>
            </ul>
            <div class="substep" style="height:430px; overflow: auto">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include <stdio.h>
                    int main(void)
                    {
                        int m, n;

                        printf("input two positive integer number:");
                        scanf("%d,%d", &m, &n);

                        /*判断两个数的大小，通过交换确保 m < n */
                        if(m>n){
                            int t=m; m=n; n=t;
                        }
                        /*求最大公约数, 从比较小的数m开始往下查找, 最小是1*/
                        for(int i=m; i>=1; i--){
                            if( m % i ==0 && n % i == 0){
                                printf("the greatest common divisor of %d and %d is %d\n", m, n, i);
                                break;
                            }
                        }
                        /*求最小公倍数，从比较大的数n开始往上查找，最大是m*n */
                        for(int i=n; i<=m*n; i++){
                            if( i % m ==0 && i % n == 0){
                                printf("the least common multiple of %d and %d is %d\n", m, n, i);
                                break;
                            }
                        }

                        return 0;
                    }
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.6.5" class="step slide" data-x="4500" data-y="2400" data-rotate="0" data-scale="1">
            <h3 class="animated bounce " style="padding: 0; margin: 0">5.6 循环程序举例</h3>
            <hr>
            <ul>
               <li class="substep">例5-10：输出所有水仙花数，即一个三位数，各数字立方和等于该数本身，比如\(153=1^3+5^3+3^3\)
               </li>
            </ul>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include<stdio.h>
                    int main(void)
                    {
                        int daffodil, d1, d2, d3;
                        for(daffodil=100; daffodil<1000; daffodil++){
                            d1 = daffodil / 100; 
                            d2 = daffodil % 100 / 10;
                            d3 = daffodil % 10;
                            if( d1*d1*d1 + d2*d2*d2 + d3*d3*d3 == daffodil){
                                printf("%d ", daffodil);
                            }
                        }
                        putchar('\n');
                        return 0;
                    }
                    ]]>
               </script>
            </div>
            <h5 class="substep">结果：<code>153 370 371 407</code></h5>
         </div>

         <div id="5.6.6" class="step slide" data-x="4500" data-y="3200" data-rotate="0" data-scale="1">
            <h3 class="animated bounceInDown" style="padding: 0; margin: 0">5.6 循环程序举例</h3>
            <hr>
            <ul style="font-size: 27px;">
               <li class="substep">例5-11：有一个球，从100m的高度自由落下，每次落地后反跳回原高度的一半，再落下，再反弹，求第10次落地时，已经经过多少距离，第10次反弹有多高？
               </li>
               <li class="substep"><span class="red">[解题分析]</span>：
                  <ol>
                     <li class="substep">第1次落地，经过距离\(s_1=100\), 反弹\(r_1=50\)</li>
                     <li class="substep">第2次落地，经过距离\(s_2=100+50*2=s_1+r_1*2\), 反弹\(r_2=\frac{50}{2}=25=\frac{r_1}{2}\)</li>
                     <li class="substep">第3次落地，经过距离\(s_3=100+50*2+25*2=s_2+r_2*2\), 反弹\(r_3=\frac{25}{2}=12.5=\frac{r_2}{2}\)</li>
                     <li class="substep">第n次落地，经过距离\(s_n=s_{n-1}+r_{n-1}*2\), 反弹\(r_n=\frac{r_{n-1}}{2}\)</li>
                  </ol>
               </li>
            </ul>
         </div>

         <div id="5.6.7" class="step slide" data-x="5500" data-y="3200" data-rotate="0" data-scale="1">
            <script type="syntaxhighlighter" class="brush: c">
               <![CDATA[
                    #include<stdio.h>
                    int main(void)
                    {
                        double s=100, r=50 ;
                        printf("[%2d]s=%10g, r=%10g\n",1,s,r);
                        for(int i=2; i<=10; i++){
                            s=s+r*2; r=r/2;
                            printf("[%2d]s=%10g, r=%10g\n",i,s,r);
                        }
                        return 0;
                    }
        ]]>
            </script>
            <img src="images/fig5-5.png" class="substep" style="width: 80%">
         </div>

         <div id="5.6.8" class="step slide" data-x="4500" data-y="4000" data-rotate="0" data-scale="1">
            <h3 class="animated bounceInLeft" style="padding: 0; margin: 0">5.6 循环程序举例</h3>
            <hr>
            <ul style="font-size: 27px;">
               <li class="substep">例5-12：用迭代法求\(x=\sqrt{a}\),其公式为\(x_{n+1}=\frac{1}{2}\left(x_n+\frac{a}{x_n}\right) \),要求其前后两次求出来的x的差的绝对值小于\(10^{-5}\)</li>
            </ul>
            <div class="substep">
               <script type="syntaxhighlighter" class="brush: c">
                  <![CDATA[
                    #include<stdio.h>
                    #include<math.h>
                    #define MIN_VALUE 10e-5

                    int main(void)
                    {
                        double x=1.0, last_x, a;

                        printf("input a real number:");
                        scanf("%lf", &a);
                                                
                        do{
                            last_x = x;
                            x = 1.0/2.0*(x+a/x);
                        }while(fabs(x-last_x)>MIN_VALUE);

                        printf("sqrt(%lg) = %lg\n", a, x);
                        return 0;
                    }
                    ]]>
               </script>
            </div>
         </div>

         <div id="5.6.9" class="step slide" data-x="4500" data-y="4800" data-rotate="0" data-scale="1">
            <h3 class="animated fadeIn" style="padding: 0; margin: 0">5.6 循环程序举例</h3>
            <hr>
            <ul style="font-size: 22px;">
               <li class="substep">例5-13：用牛顿迭代法求\(2x^3-4x^2+3x-6=0\)的根,要求其前后两次求出来的x的差的绝对值小于\(10^{-5}\)</li>
               <li class="substep"><span class="red">[牛顿迭代法]</span>：
                  <ol>
                     <li class="substep">设有任意函数\(f(x)\)N阶可导, 对其在\(x_0\)处进行一阶泰勒展开，\(f(x)\approx f(x_0)+(x-x_0)f'(x_0)\),\[\left.\begin{aligned}令 f(x)&amp;=0\\ \Rightarrow f(x_0)+(x-x_0)f'(x_0) &amp;=0\\ \Rightarrow f(x_0)+xf'(x_0)-x_0f'(x_0) &amp;=0\\ \Rightarrow xf'(x_0)&amp;=x_0f'(x_0)-f(x_0)\\
                        \Rightarrow x&amp;=x_0-\frac{f(x_0)}{f'(x_0)}\end{aligned}\right.\]</li>
                     <li class="substep">由上面的公式可得，当在\(x_0\)(可由用户输入指定)开始，反复利用上面的公式进行迭代，最后可以得到一个根的近似值（不是全部值），可以通过前后两个近似值的差值来控制精度。</li>
                     <li class="substep">对于本例，\(f(x)=2x^3-4x^2+3x-6, f'(x)=6x^2-8x+3\)</li>
                  </ol>
               </li>
            </ul>
         </div>

         <div id="5.6.10" class="step slide" data-x="5500" data-y="4800" data-rotate="0" data-scale="1">
            <div class="fade-in fade-out">
               <script type="syntaxhighlighter" class="brush: c; ">
                  <![CDATA[
                    #include<stdio.h>
                    #include<math.h>
                    #define MIN_VALUE 1e-6

                    int main(void)
                    {
                        double x, last_x, f, df;
                        int i=0;
                        x=1.0;
                        do{
                            last_x = x;
                            f=2*x*x*x-4*x*x+3*x-6;
                            df=6*x*x-8*x+3;
                            x=x-f/df;
                            printf("[%3d]x=%10g, dx=%15g\n", i++, x, fabs(x-last_x));
                        }while(fabs(x-last_x)>MIN_VALUE);
                        return 0;
                    }
              ]]>
               </script>
            </div>
            <img src="images/fig5-7.png" class="substep" style="width: 45%">
         </div>


         <div id="overview" class="step" data-x="0" data-y="0" data-scale="12">
         </div>

      </div>

      <div id="progress">
         <div id="progress-bar"></div>
      </div>

      <script src="js/jquery/jquery.js"></script>
      <script src="js/impress1.js"></script>
      <script src="js/SyntaxHighlighter/scripts/shCore.js"></script>
      <script src="js/SyntaxHighlighter/scripts/shBrushCpp.js"></script>
      <script>
         SyntaxHighlighter.all();
         impress().init();

         $(document).ready(function() {
            var stepCount = $('.step').length;

            $(document).on('impress:stepenter', function(e) {
               var currentSlide = e.target;
               var currentSlideProgress = $('.step').index(currentSlide) + 1;
               var progressPerStep = 100 / stepCount;
               var progress = Math.ceil(currentSlideProgress * progressPerStep);
               $('#progress-bar').css('width', progress + '%');
               e.stopImmediatePropagation();
            });
         });
      </script>
   </body>

</html>